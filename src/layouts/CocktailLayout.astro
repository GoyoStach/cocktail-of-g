---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'cocktails'>['data'];

const { title, description, pubDate, heroImage, ingredients } = Astro.props;
---

<html lang='en'>
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body class='min-h-screen bg-gradient-to-br from-slate-50 to-orange-50'>
		<nav class='sticky top-0 z-10 border-b border-orange-100 bg-white/80 backdrop-blur-md'>
			<div class='mx-auto max-w-7xl px-4 sm:px-6 lg:px-8'>
				<div class='flex h-16 items-center justify-between'>
					<a
						href='/'
						class='text-2xl font-bold text-orange-600 transition-colors hover:text-orange-700'
					>
						Cocktail Collection
					</a>
				</div>
			</div>
		</nav>

		<main class='mx-auto max-w-4xl px-4 py-8 sm:px-6 lg:px-8'>
			<article class='overflow-hidden rounded-2xl bg-white shadow-xl'>
				{
					heroImage && (
						<div class='relative flex h-80 items-center justify-center overflow-hidden bg-gradient-to-br from-orange-50 to-amber-50'>
							<Image
								width={800}
								height={400}
								src={heroImage}
								alt={title}
								class='max-h-full max-w-full object-contain p-8 transition-transform duration-300'
								transition:name={`cocktail-${title.replace(/\W/g, '')}`}
							/>
							<div class='absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent' />
							<div class='absolute bottom-6 left-6 text-white'>
								<h1 class='mb-2 text-4xl font-bold'>{title}</h1>
								<p class='text-lg opacity-90'>{description}</p>
								<div class='mt-3 flex items-center gap-2 text-sm opacity-75'>
									<svg
										class='h-4 w-4'
										fill='currentColor'
										viewBox='0 0 20 20'
									>
										<path
											fill-rule='evenodd'
											d='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z'
											clip-rule='evenodd'
										/>
									</svg>
									<FormattedDate date={pubDate} />
								</div>
							</div>
						</div>
					)
				}

				<div class='p-8'>
					<div class='mb-8'>
						<h2
							class='mb-6 flex items-center gap-3 text-2xl font-bold text-slate-900'
						>
							<svg
								class='h-6 w-6 text-orange-500'
								fill='currentColor'
								viewBox='0 0 20 20'
							>
								<path
									d='M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z'
								></path>
							</svg>
							Ingredients
						</h2>
						<div class='grid gap-3'>
							{
								ingredients.map((ingredient) => (
									<div class='flex items-center justify-between rounded-xl border border-orange-100 bg-orange-50 p-4'>
										<span class='font-medium text-slate-800'>
											{ingredient.name}
										</span>
										<span class='font-semibold text-orange-600'>
											{ingredient.quantity} {ingredient.unit}
										</span>
									</div>
								))
							}
						</div>
					</div>

					<div
						class='prose prose-lg prose-headings:text-slate-900 prose-headings:font-bold prose-h2:text-xl prose-h2:flex prose-h2:items-center prose-h2:gap-3 prose-p:text-slate-700 prose-ul:text-slate-700 prose-li:my-1 max-w-none'
					>
						<slot />
					</div>
				</div>
			</article>
		</main>
	</body>
</html>
